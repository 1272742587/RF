(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-rferp-index"],{"0dc4":function(t,e,n){var i=n("68f6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("59bfd383",i,!0,{sourceMap:!1,shadowMode:!1})},"14ba":function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("a649")),r=i(n("4c34")),s=function(t){return{BIZTRANSACTIONID:t,COUNT:"",CONSUMER:"10061",SRVLEVEL:"",ACCOUNT:"10061",PASSWORD:"",PAGENUM:"",PAGESIZE:"",MODULE:""}},o={instockQuery:function(t,e){var n=e["InformNo"]+"in"+Date.now(),i={REQUEST:{HEAD:s(n),LIST:[e]}};return(0,a.default)(r.default.INCA_PF_HOST+t,i).then((function(t){return t}))},outstockQuery:function(t,e){var n=e["OutformNo"]+"out"+Date.now(),i={REQUEST:{HEAD:s(n),LIST:[e]}};return(0,a.default)(r.default.INCA_PF_HOST+t,i).then((function(t){return t}))},scanfeedback:function(t,e){var n="scanfeedback"+Date.now(),i={REQUEST:{HEAD:s(n),LIST:[e]}};return(0,a.default)(r.default.CQP_ERP_PF_HOST+t,i).then((function(t){return t}))},savetmpinfo:function(t,e){var n="savetmpinfo"+Date.now(),i={REQUEST:{HEAD:s(n),LIST:[e]}};return(0,a.default)(r.default.CQP_ERP_PF_HOST+t,i).then((function(t){return t}))},querytmpinfo:function(t,e){var n="querytmpinfo"+Date.now(),i={REQUEST:{HEAD:s(n),LIST:[e]}};return(0,a.default)(r.default.CQP_ERP_PF_HOST+t,i).then((function(t){return t}))}};e.default=o},"1b41":function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("5c47"),n("a1c1"),n("fd3c"),n("dc8a"),n("473f"),n("bf0f"),n("aa77");var a=i(n("9b1b")),r=i(n("4d76")),s=(i(n("ceba")),i(n("14ba"))),o=i(n("b93a")),u=n("8f59"),c={name:"drugCode",data:function(){return{orderId:"",orderType:0,code:"",type:"",typeName:"",lists:[],isEmpty:!1,focusField:{orderId:!1}}},computed:(0,a.default)((0,a.default)({},(0,u.mapGetters)({casesPickInfo:"casesPickInfo"})),{},{label:function(){return this.$getOrderTypeName(this.orderType)+"ID"}}),components:{uniCard:r.default,uniTag:o.default},onBackPress:function(t){},watch:{},onShow:function(){this.casesPickInfo&&this.casesPickInfo.isSave&&(this.handleConfirm(),this.clearCasesPickInfo())},onLoad:function(t){var e=this;this.code=t.code,this.type=t.type;var n=t.name;n||(n=function(t){var e=[{name:"出库",type:"out",icon:"chuku1",data:[{code:"0",label:"正常销售出库"},{code:"5",label:"进货退出出库"},{code:"7",label:"移库出库"},{code:"9",label:"报损出库"}]},{name:"入库",type:"in",icon:"ruku",data:[{code:"0",label:"普通采购"},{code:"5",label:"移库入库"},{code:"7",label:"销退入库"}]}].find((function(e){return e.type===t.type})),n=e&&e.data.find((function(e){return e.code===t.code}));return null===n||void 0===n?void 0:n.label}(t)),this.typeName=n,uni.setNavigationBarTitle({title:n}),setTimeout((function(){e.focusField.orderId=!0})),"out"===t.type?this.orderType=2:this.orderType=0,this.$forceUpdate()},created:function(){},methods:(0,a.default)((0,a.default)({},(0,u.mapActions)({setCasesPickInfo:"setCasesPickInfo",clearCasesPickInfo:"clearCasesPickInfo"})),{},{handleShowSelect:function(){var t=this,e="in"==this.type?["收货单ID","合并验收单ID"]:"3"==this.code?["拣货单ID","销售发货单总单ID"]:["拣货单ID"];uni.showActionSheet({itemList:e,success:function(e){t.orderType="in"==t.type?e.tapIndex:e.tapIndex+2}})},stateFilter:function(t){var e=0;"1"==t.Dzjgmbz&&e++,"1"==t.Qxwymbz&&e++,"1"==t.Xxmbz&&e++;var n=0;return"1"==t.Dzjgmbz&&"1"==t.ScanComplete&&n++,"1"==t.Qxwymbz&&"1"==t.WymScanComplete&&n++,"1"==t.Xxmbz&&"1"==t.XxmScanComplete&&n++,console.log("codeNum: ",e),console.log("completeNum: ",n),0==n?{text:"未扫描",colorClass:"error"}:e>n?{text:"部分扫描",colorClass:"warning"}:e==n?{text:"已完成",colorClass:"primary"}:{}},handleConfirm:function(t){var e=this;if(this.orderId){var n;if("out"===this.type){var i=this.$system.outstockQuery;n=s.default.outstockQuery(i,{OutformNo:t&&t.value||this.orderId,OutformType:this.code,OrderType:3==this.orderType?"2":"1"})}if("in"===this.type){var a=this.$system.instockQuery;n=s.default.instockQuery(a,{InformNo:t&&t.value||this.orderId,InformType:this.code,OrderType:this.orderType})}n.then((function(t){if(0==t.HEAD.ERRORCODE){e.lists=t.LIST.map((function(t){var e=Object.keys(t);return e.reduce((function(e,n){var i=n.replace(/^\w/,(function(t){return t.toUpperCase()}));return e[i]=t[n],e}),{})})),e.isEmpty=e.lists.length<=0}else e.$simpleToast(t.HEAD.ERRORINFO)}))}else this.$simpleToast("请输入".concat(this.label))},handleClick:function(t,e){var n;if("已完成"!=(null===(n=this.stateFilter(t))||void 0===n?void 0:n.text)){var i=this.orderType;"in"===this.type&&(i=t.OrderType);var r=(0,a.default)((0,a.default)({},t),{},{typeName:this.typeName,type:this.type,orderId:this.orderId,formType:this.code,index:e,orderType:i});this.setCasesPickInfo(r),this.$navigateTo("/pages/rferp/drug")}else this.$simpleToast("已扫描完成")}})};e.default=c},"1ea9":function(t,e,n){"use strict";var i=n("a6f6"),a=n.n(i);a.a},"2bf0":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.empty-wrap[data-v-0e304822]{height:100%;text-align:center}',""]),t.exports=e},5862:function(t,e,n){"use strict";n.r(e);var i=n("c9f7"),a=n("6dc2");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("d533");var s=n("828b"),o=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"56d66fdb",null,!1,i["a"],void 0);e["default"]=o.exports},"68f6":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.drug-code-wrap[data-v-56d66fdb] .card-header-bg{background:#f8f8f8}.drug-code-wrap[data-v-56d66fdb] .success{color:#007d34}.drug-code-wrap[data-v-56d66fdb] .warn{color:#f0ad4e}.drug-code-wrap[data-v-56d66fdb] .red{color:#dd524d}.select[data-v-56d66fdb]{background:#fff;height:%?66?%;border:1px solid #f5f5f5;margin-left:%?10?%;padding:0 %?10?%;font-size:%?28?%;display:flex;align-items:center}',""]),t.exports=e},"6dc2":function(t,e,n){"use strict";n.r(e);var i=n("1b41"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"80b7":function(t,e,n){"use strict";n.r(e);var i=n("d3a7"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},a649:function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4626"),n("5ac7"),n("c223"),n("bf0f"),n("d4b5"),n("f7a5");i(n("4c34"));var a=n("8b8c"),r=n("b439"),s=i(n("8c96")),o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",i=arguments.length>3?arguments[3]:void 0,o=(0,r.getData)("userInfo")||"",u=(0,r.getData)("loginInfo")||"",c=t.includes("http:")||t.includes("https:")?t:"http://".concat((0,r.getData)("serverInfo").ServerIP).concat(t);return!i&&(0,a.showLoading)(),new Promise((function(t,i){uni.request({url:c,data:JSON.stringify(e),sslVerify:!1,method:n,header:{"Content-type":"application/json;charset=UTF-8",CompanyID:o&&o.CompanyID||u.CompanyID||"",version:s.default&&s.default.AppInfo&&s.default.AppInfo.version||"","out-system-sign":(null===u||void 0===u?void 0:u.Sign)||void 0},complete:function(e){if((0,a.hideLoading)(),401==e.statusCode)return uni.removeStorage({key:"userInfo"}),(0,r.clear)("loginInfo"),uni.showToast({title:"登录失效，请重新登录！",icon:"none",position:"top",duration:2e3}),void setTimeout((function(){var t=getCurrentPages(),e=t[t.length-1].route;console.log("当前页面路径:",e),(null===e||void 0===e||!e.includes("/login/index"))&&uni.reLaunch({url:"/pages/login/index"})}),2e3);if(200==e.statusCode){var n=e.data.RESPONSE;n.HEAD&&0==n.HEAD.RESULT?t(n):i(n.HEAD.COMMENTS||"出错了，请联系管理员")}else{var s,o,u,c,d="请求失败，".concat(e.statusCode," ").concat(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(o=s.message)||void 0===o?void 0:o.slice(0,100)).concat((null===e||void 0===e||null===(u=e.data)||void 0===u||null===(c=u.message)||void 0===c?void 0:c.length)>100?"...":"");i(d)}}})}))};e.default=o},a6f6:function(t,e,n){var i=n("2bf0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("b5c31758",i,!0,{sourceMap:!1,shadowMode:!1})},b928:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAQxJREFUWEftlm0OgyAMhpWTbachnmLbKYxcRncxWGo0IUag8PYHS7q/tuXJ049sHDr/jZ3zDQqIdkgNqkHUAJqvM6gGUQNo/v/PoHNuDSF8rbVv1EacvyzLXs97v03TtKVqZw3O8/wwxqxH8kcK8oB7HYBPKUCqB0PGcFTQWpuVVJzBi0UI8grnvc/ao8eKgBQkAdkCxwZEIVvhqgBbIa9wtXPMavHNedg3sLTdKFy1wZOI8zAnhnNXqw1yIKXgmg2mIOls0LfouENnCQakAje24s7Bh725xYXFgc2d9UUAb0zC5sQBT8jSvxPO5sYxYgZrH+bGKyDXVCpODapB1ACarzOoBlEDaH73M/gDteSVKetWOPwAAAAASUVORK5CYII="},ba77:function(t,e,n){"use strict";n.r(e);var i=n("def7"),a=n("80b7");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("1ea9");var s=n("828b"),o=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"0e304822",null,!1,i["a"],void 0);e["default"]=o.exports},c9f7:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={rfForm:n("a460").default,rfInput:n("d184").default,rfEmpty:n("ba77").default,uniCard:n("4d76").default,uniIcons:n("5102").default,uniTag:n("b93a").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("appContainer",{staticClass:"drug-code-wrap",attrs:{hidden:!0}},[i("v-uni-view",{staticClass:"uni-flex uni-column"},[i("v-uni-view",{staticStyle:{display:"flex"}},[i("rf-form",{attrs:{overflow:!1,focusField:t.focusField}},[i("rf-input",{attrs:{focus:t.focusField.orderId,label:t.label,placeholder:""},on:{"update:focus":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.focusField,"orderId",e)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.handleConfirm.apply(void 0,arguments)}},model:{value:t.orderId,callback:function(e){t.orderId=e},expression:"orderId"}},[i("template",{slot:"extra"},[i("v-uni-view",{staticClass:"p-r-20"},[i("v-uni-button",{staticClass:"search-button",staticStyle:{"margin-top":"10rpx"},attrs:{size:"mini",type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleConfirm.apply(void 0,arguments)}}},[t._v("搜索")])],1)],1),i("template",{slot:"label"},[i("v-uni-view",{staticClass:"select",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleShowSelect.apply(void 0,arguments)}}},[i("v-uni-text",[t._v(t._s(t.label))]),i("v-uni-image",{staticStyle:{width:"40rpx",height:"40rpx"},attrs:{src:n("b928")}})],1)],1)],2)],1)],1),i("v-uni-view",{staticClass:"uni-flex-item scroll-box p-b-20"},[i("v-uni-scroll-view",{staticStyle:{height:"100%"},attrs:{"scroll-y":"true"}},[t.isEmpty?i("rf-empty",{attrs:{emptyText:"未找到商品信息"}}):t._l(t.lists,(function(e,n){return i("uni-card",{key:n,attrs:{isShadow:!0,headerBg:"card-header-bg",title:e.GoodsID},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleClick(e,n)}}},[i("template",{slot:"icon"},[i("uni-icons",{staticClass:"f-b p-r-10",attrs:{type:"shop"}})],1),i("template",{slot:"title"},[i("v-uni-view",{staticClass:"f-b"},[t._v(t._s(e.GoodsID))])],1),i("template",{slot:"extra"},[i("uni-tag",{attrs:{type:t.stateFilter(e).colorClass,size:"small",text:t.stateFilter(e).text}})],1),i("v-uni-view",{staticStyle:{"line-height":"1.5"}},[i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v("品名：")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v(t._s(e.GoodsName))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v("规格：")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v(t._s(e.Model))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v("批号：")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v(t._s(e.GoodsBatch))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v("厂牌：")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v(t._s(e.Trade))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v("客户名称：")]),i("v-uni-view",{staticClass:"uni-flex-item uni-right"},[t._v(t._s(e.SupplierName))])],1),i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-view",{staticClass:"f-c-g w-200"},[t._v(t._s("out"===t.type?"出库数量：":"入库数量："))]),i("v-uni-view",{staticClass:"uni-flex-item uni-right f-primary f-b"},[t._v(t._s(e.Quantity))])],1)],1)],2)}))],2)],1)],1)],1)},r=[]},d3a7:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"empty",props:{emptyText:{type:String,default:"暂无数据"}}};e.default=i},d533:function(t,e,n){"use strict";var i=n("0dc4"),a=n.n(i);a.a},def7:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"empty-wrap VM"},[e("v-uni-view",{staticClass:"VMC"},[this._v(this._s(this.emptyText))])],1)},a=[]}}]);